<main>
  <div class="container">
    <div class="avatar-information">
      <div class="row">
        <div class="col-xs-6">
          <% if current_user.level == 1 %>
            <%= image_tag "Avatar1.png", height:'185', width:'auto' %>
          <% elsif current_user.level == 2 %>
            <%= image_tag "Avatar2.png", height:'170', width:'150' %>
          <% else %>
            <%= image_tag "trashflies.png", height:'185', width:'auto' %>
          <% end %>
        </div>
        <div class="col-xs-6">
          <div class="information">
            <% if current_user.provider == "facebook" %>
              <h1> <%= current_user.first_name %><%= current_user.id %> </h1>
            <% else %>
              <h1><%= current_user.pseudo %></h1>
            <% end %>
            <span><strong>Level</strong><br><%= current_user.level %></span>
            <span><strong>Point total</strong><br><%= current_user.score %></span>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12">



      <div class="badges">
        <%= image_tag "Badge_applause.png", height:'60', width:'60', class: 'image'  %>
        <div class= "title-progbar">
          <p>Yes I Scan !</p>
          <i>
            <% if !UserBadge.find_by(user: current_user, badge_id: 1).nil? %>
              <%=  UserBadge.find_by(user: current_user, badge_id: 1).point %> / <%=  Badge.find(1).level %>
            <% else %>
              0/ <%=  Badge.find(1).level %>
            <% end %>
          </i>

          <% if !UserBadge.find_by(user: current_user, badge_id: 1).nil? %>

          <% if UserBadge.find_by(user: current_user, badge_id: 1).point == 0 %>


              <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                <span class="sr-only">0% Complete</span>
                </div>
              </div>

             <% elsif UserBadge.find_by(user: current_user, badge_id: 1).point == 1 %>


              <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%">
                <span class="sr-only">100% Complete</span>
                </div>
              </div>


              <% end %>

          <% else %>


            <div class="progress">
              <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
              <span class="sr-only">0% Complete</span>
              </div>
            </div>


         <% end %>
        </div>
      </div>

      <div class="badges">

        <%= image_tag "Badge_diploma.png", height:'60', width:'60', class: 'image' %>

        <div class= "title-progbar">
          <p>Diplom√©</p>
          <i>
            <% if !UserBadge.find_by(user: current_user, badge_id: 2).nil? %>
              <%=  UserBadge.find_by(user: current_user, badge_id: 2).point %> / <%=  Badge.find(2).level %>
            <% else %>
              0/ <%=  Badge.find(2).level %>
            <% end %>
          </i>

          <% if !UserBadge.find_by(user: current_user, badge_id: 2).nil? %>

          <% if UserBadge.find_by(user: current_user, badge_id: 2).point == 0 %>


              <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                <span class="sr-only">0% Complete</span>
                </div>
              </div>

             <% elsif UserBadge.find_by(user: current_user, badge_id: 2).point == 1 %>


              <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width:33%">
                <span class="sr-only">33% Complete</span>
                </div>
              </div>

            <% elsif UserBadge.find_by(user: current_user, badge_id: 2).point == 2 %>

              <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width:66%">
                <span class="sr-only">66% Complete</span>
                </div>
              </div>

           <% else  %>

              <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%">
                <span class="sr-only">100% Complete</span>
                </div>
              </div>


              <% end %>

          <% else %>


            <div class="progress">
              <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
              <span class="sr-only">0% Complete</span>
              </div>
            </div>


         <% end %>
        </div>
      </div>


      <div class="badges">
        <%= image_tag "Badge_paparazzi.png", height:'60', width:'60', class: 'image'  %>
        <div class= "title-progbar">
          <p>Paparazzi</p>
          <i>
            <% if !UserBadge.find_by(user: current_user, badge_id: 3).nil? %>
              <%=  UserBadge.find_by(user: current_user, badge_id: 3).point %> / <%=  Badge.find(3).level %>
            <% else %>
              0/ <%=  Badge.find(3).level %>
            <% end %>
          </i>

          <% if !UserBadge.find_by(user: current_user, badge_id: 3).nil? %>

           <% if UserBadge.find_by(user: current_user, badge_id: 3).point == 0 %>


              <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                <span class="sr-only">0% Complete</span>
                </div>
              </div>

             <% elsif UserBadge.find_by(user: current_user, badge_id: 3).point == 1 %>


              <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100" style="width:33%">
                <span class="sr-only">33% Complete</span>
                </div>
              </div>

            <% elsif UserBadge.find_by(user: current_user, badge_id: 3).point == 2 %>

              <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width:66%">
                <span class="sr-only">66% Complete</span>
                </div>
              </div>

           <% else  %>

              <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%">
                <span class="sr-only">100% Complete</span>
                </div>
              </div>


              <% end %>

          <% else %>


            <div class="progress">
              <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width:0%">
              <span class="sr-only">0% Complete</span>
              </div>
            </div>


         <% end %>
        </div>
      </div>





































    </div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <div class="paddingblock">
        <div class="ranking">
          <div class="classement">
            <i class="fas fa-trophy"></i><h3 class="text-center">Classement local</h3>
          </div>
          <hr>
          <div class="list-organised">
          <ul class="list-unstyled">
            <% @list_to_show.each_with_index do |user, index|  %>
              <li>
                <% if user == current_user %>
                  <div class="underline">
                    <p class="rank-nb">#<%= index + 1 %></p>
                    <% if user.provider == "facebook" %>
                      <%= image_tag (user.facebook_picture_url), class:'small-avatar',height: 35, width: 35 %>
                      <div class="user-details">
                        <p><%= user.first_name %><%= user.id %></p>
                        <p class="user-score"><%= user.score %> points</p>
                      </div>
                    <% elsif user.photo.present? %>
                      <%= cl_image_tag user.photo, class:'small-avatar', height: 35, width: 35 %>
                      <div class="user-details">
                        <p><%= user.pseudo %></p>
                        <p class="user-score"><%= user.score %> points</p>
                    </div>
                    <% else %>
                      <%= image_tag "green_trash.png", class:'small-avatar', height: 35, width: 35 %>
                      <div  class="user-details">
                        <p><%= user.pseudo %></p>
                        <p class="user-score"><%= user.score %> points</p>
                      </div>
                    <% end %>
                  </div>

                <% else %>
                  <p class="rank-nb">#<%= index + 1 %></p>
                  <% if user.provider == "facebook" %>
                    <%= image_tag (user.facebook_picture_url), class:'small-avatar',height: 35, width: 35 %>
                    <div class="user-details">
                      <p><%= user.first_name %><%= user.id %></p>
                      <p class="user-score"><%= user.score %> points</p>
                    </div>
                  <% elsif user.photo.present? %>
                    <%= cl_image_tag user.photo, class:'small-avatar', height: 35, width: 35 %>
                    <div class="user-details">
                      <p><%= user.pseudo %></p>
                      <p class="user-score"><%= user.score %> points</p>
                  </div>
                  <% else %>
                    <%= image_tag "green_trash.png", class:'small-avatar', height: 35, width: 35 %>
                    <div  class="user-details">
                      <p><%= user.pseudo %></p>
                      <p class="user-score"><%= user.score %> points</p>
                    </div>
                  <% end %>
                <% end %>
              </li>
            <% end %>
         </ul>
         </div>
        </div>
      </div>
    </div>
    <div class="col-xs-12">
      <div class="podium">


          <ul class="list-inline podium-list">
            <% @up.each do |user| %>
              <li>
                <div class="podium-position">
                  <% if user.provider == "facebook" %>
                    <%= image_tag (user.facebook_picture_url), class:'small-avatar',height: 60, width: 60  %>
                  <p><%= user.first_name %><%= user.id %></p>
                  <% elsif user.photo.present? %>
                    <%= cl_image_tag user.photo, class:'small-avatar',height: 60, width: 60 %>
                    <p><%= user.pseudo %></p>
                  <% else %>
                    <%= image_tag "green_trash.png", class:'small-avatar',height: 60, width: 60  %>
                    <p><%= user.pseudo %></p>
                  <% end %>
                </div>
              </li>
            <% end %>
          </ul>

          <%= image_tag "podium.png", height:'auto', class:'img-podium', width:'90%' %>


      </div>
    </div>
  </div>
  <div class="spacer"></div>


</div>
    <%= render "/shared/button" %>
</main>






